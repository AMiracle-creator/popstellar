{
	"$schema": "http://json-schema.org/draft/2019-09/schema#",
	"$id": "http://pop2020.dedis.ch/broadcast.json",
	"description": "Match propagation/broadcast of a message on a channel query",
	"type": "object",

	"properties": {
		"method": { 
			"description": "[String] operation to be performed by the query",
			"const": "message" 
		},
		"params": {
			"type": "object",
			"properties": {
				"channel": { "description": "[String] name of the channel", "$ref": "channel/subChannel.json" },
				"message": { 
					"description": "[Message] message to be published", 
					"oneOf": [
						{ "$ref": "message/messageUpdateLao.json" },
						{ "$ref": "message/messageStateLao.json" },
						{ "$ref": "message/messageWitnessMessage.json" },
						{ "$ref": "message/messageCreateMeeting.json" },
						{ "$ref": "message/messageStateMeeting.json" }
					]
				}
			},
			"additionalProperties": false,
			"required": ["channel", "message"]
		}
	},
	"maxProperties": 3,
	"required": ["method", "params"],
	"$comment": "Note: only 3 properties on this query!"
}
