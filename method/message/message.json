{
    "$comment": "By executing a publish action, an attendee communicates its intention to publish a specific message on a channel.",
    "$schema": "http://json-schema.org/draft/2019-09/schema#",
    "$id": "http://pop2020.dedis.ch/message.json",
    "type": "object",
    "definition" : {
        "description": "Content of the message",
        "type": "object",
        "properties": {
            "anyOf": [
                { "$ref": "data/createLao.json#/definition" },
                { "$ref": "data/createMeting.json#/definition" },
                { "$ref": "data/stateLao.json#/definition" },
                { "$ref": "data/stateMeeting.json#/definition" },
                { "$ref": "data/updateLao.json#/definition" },
                { "$ref": "data/witnessMessage.json#/definition" }
            ],
            "sender": {
                "description": "Public key of sender",
                "type": "string"
            },
            "signature": {
                "description": "Signature by sender over data",
                "type": "string"
            },
            "message_id": {
                "$comment": "BFord: Not sure that this actually needs to be transmitted, since it can simply be computed from the data and signature?",
                "description": "hash(data||signature)",
                "type": "string"
            },
            "witness_signatures": {
                "description": "Signature by witnesses (sender||data)",
                "type": "array",
                "items": {
                    "$comment": "initially empty array, will be filled on further message. Not 100% sure whether it should be in the required list (but allowed to be empty) or not",
                    "type": "string"
                }
            }
        },
        "required": ["anyOf", "sender", "signature", "message_id", "witness_signatures"]
    }

}